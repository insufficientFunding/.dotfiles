local mappings = {}

mappings.insert = {
   -- Navigate within insert mode
   ['<C-h>'] = { '<Left>', 'Move left' },
   ['<C-l>'] = { '<Right>', 'Move right' },
   ['<C-j>'] = { '<Down>', 'Move down' },
   ['<C-k>'] = { '<Up>', 'Move up' },
}

mappings.terminal = {
   ['<C-x>'] = { vim.api.nvim_replace_termcodes('<C-\\><C-N>', true, true, true), 'Escape terminal mode' },
}

mappings.normal = {
   -- Nagivate between windows
   ['<C-h>'] = { '<C-w>h', 'Window left' },
   ['<C-l>'] = { '<C-w>l', 'Window right' },
   ['<C-j>'] = { '<C-w>j', 'Window down' },
   ['<C-k>'] = { '<C-w>k', 'Window up' },

   -- Save
   ['<C-s>'] = { '<cmd> w <cr>', 'Save file' },

   -- Bufferline
   ['<Tab>'] = { '<cmd> BufferLineCycleNext <cr>', 'Next tab' },
   ['<S-Tab>'] = { '<cmd> BufferLineCyclePrev <cr>', 'Previous tab' },

   -- Folding
   ['z'] = {
      R = { [[<cmd> lua require('ufo').openAllFolds() <cr>]], 'Open all folds' },
      M = { [[<cmd> lua require('ufo').closeAllFolds() <cr>]], 'Close all folds' },
   },

   ['<leader>'] = {
      -- LSP
      l = {
         name = '+lsp',

         a = { '<cmd> lua vim.lsp.buf.code_action() <cr>', 'Code action' },
         d = { '<cmd> lua vim.lsp.buf.definition() <cr>', 'Definition' },
         r = { '<cmd> lua vim.lsp.buf.references() <cr>', 'References' },
         R = { '<cmd> lua vim.lsp.buf.rename() <cr>', 'Rename' },
         i = { '<cmd> lua vim.lsp.buf.implementation() <cr>', 'Implementation' },
         h = { '<cmd> lua vim.lsp.buf.hover() <cr>', 'Hover' },
         s = { '<cmd> lua vim.lsp.buf.signature_help() <cr>', 'Signature help' },
         t = { '<cmd> lua vim.lsp.buf.type_definition() <cr>', 'Type definition' },
         f = { '<cmd> lua vim.lsp.buf.format() <cr>', 'Format' },
      },

      -- Outline
      o = { '<cmd> Outline <cr>', 'Symbols outline' },

      -- Buffer
      x = { '<cmd> bd <cr>', 'Close buffer' },
      b = {
         name = '+buffer',

         d = { '<cmd> bw! <cr>', 'Delete buffer (wont fail if unsaved)' },
      },

      p = {
         name = '+project',
         v = {
            function()
               local currentdir = vim.fn.getcwd()
               return vim.cmd('NvimTreeToggle ' .. currentdir)
            end,
            'Toggle project view',
         },

         f = { '<cmd> NvimTreeFocus <cr>', 'Focus project view' },
      },

      c = {
         name = '+directory',

         d = { '<cmd> cd %:h <cr>', 'Set working directory to opened buffer', },
         f = { '<cmd> edit $MYVIMRC <cr> <cmd> cd %:h <cr>', 'Edit vim config', },
      },

      f = {
         name = '+file',

         f = { '<cmd> Telescope find_files <cr>', 'Find files' },
         g = { '<cmd> Telescope live_grep <cr>', 'Live grep' },
         b = { '<cmd> Telescope buffers <cr>', 'Buffers' },
         h = { '<cmd> Telescope help_tags <cr>', 'Help tags' },
      },
   },
}

return mappings
